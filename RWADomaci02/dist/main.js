(()=>{"use strict";var e;!function(e){e[e.stopped=0]="stopped",e[e.running=1]="running"}(e||(e={}));const t=new class{constructor(e){this.name=e,this.score=0,this.topScore=0,this.lives=3}evaluateTopScore(){0==this.lives&&this.score>=this.topScore&&(this.topScore=this.score)}increaseScore(e){this.score+=e}reset(){this.lives=3,this.score=0}}("Strahinja"),s=new class{constructor(t,s,i,a){this.size=t,this.tiles=new Array,this.difficulty=s,this.speed=i,this.player=a,this.currentLevel=1,this.gameState=e.stopped,this.currentTile=0}evaluate(e){return this.tiles[this.currentTile]!==e?(this.player.lives--,this.currentTile=0,0===this.player.lives?(this.end(),-2):-1):(this.currentTile++,this.player.increaseScore(5),this.currentTile===this.currentLevel?(this.nextRound(),1):0)}generateARandomTile(){const e=Math.round(Math.random()*this.size*this.size)%(this.size*this.size);return this.tiles.push(e),this.tiles}start(){if(this.gameState===e.stopped)return this.reset(),this.gameState=e.running,this.generateARandomTile()}reset(){this.tiles=new Array,this.player.reset()}nextRound(){this.currentLevel++,this.currentTile=0,this.generateARandomTile()}end(){this.player.evaluateTopScore(),this.reset()}}(3,10,5,t);new class{constructor(e,t){this.model=t,this.container=e}draw(){for(let e=0;e<this.model.size;e++){const t=document.createElement("div");t.className="Row",this.container.appendChild(t);for(let s=0;s<this.model.size;s++){const i=document.createElement("button");i.className="Tile",i.id=`Button${e*this.model.size+s}`,i.onclick=async()=>{this.evaluate(i,e*this.model.size+s)},t.appendChild(i)}}const e=document.createElement("button");e.innerHTML="Start",e.className="Start",e.onclick=()=>{e.disabled=!0,this.interactableTiles("true"),this.initiateGame()},this.container.appendChild(e);const t=document.createElement("div");t.className="PlayerInfo";const s=document.createElement("label");s.innerHTML=this.model.player.name,s.className="PlayerName",t.appendChild(s);const i=document.createElement("label");i.innerHTML=this.model.player.score.toString(),i.className="PlayerScore",t.appendChild(i);const a=document.createElement("label");a.innerHTML=this.model.player.topScore.toString(),a.className="PlayerTopScore",t.appendChild(a);const l=document.createElement("label");l.innerHTML=this.model.player.lives.toString(),l.className="PlayerLives",t.appendChild(l),this.container.appendChild(t)}async sleep(e){return new Promise((t=>setTimeout(t,e)))}async initiateGame(){const e=this.model.start();console.log(e),await this.sleep(1e3),e.forEach((async e=>{await this.showTile(document.getElementById(`Button${e}`))}))}async showTile(e){return new Promise(((t,s)=>{e.classList.add("ActiveTile"),setTimeout((()=>{e.classList.remove("ActiveTile"),t(null)}),500)}))}async evaluate(e,t){switch(await this.showTile(e),this.model.evaluate(t)){case-2:document.querySelector(".Start").setAttribute("enabled","true"),this.interactableTiles("false");case-1:await this.levelNotCleared(),await this.displayPattern();break;case 0:break;case 1:await this.levelCleared(),await this.displayPattern()}this.updatePlayerInfo()}async displayPattern(){const e=this.model.tiles;console.log(e),await this.sleep(2e3);for(const t of e)await this.showTile(document.getElementById(`Button${t}`))}interactableTiles(e){document.querySelectorAll(".Tile").forEach((t=>t.setAttribute("enabled",e)))}updatePlayerInfo(){document.querySelector(".PlayerScore").innerHTML=this.model.player.score.toString(),document.querySelector(".PlayerTopScore").innerHTML=this.model.player.topScore.toString(),document.querySelector(".PlayerLives").innerHTML=this.model.player.lives.toString()}async levelCleared(){await this.sleep(500);const e=document.querySelectorAll(".Tile");e.forEach((e=>e.classList.add("Cleared"))),await this.sleep(1e3),e.forEach((e=>e.classList.remove("Cleared")))}async levelNotCleared(){await this.sleep(500);const e=document.querySelectorAll(".Tile");e.forEach((e=>e.classList.add("NotCleared"))),await this.sleep(1e3),e.forEach((e=>e.classList.remove("NotCleared")))}}(document.body,s).draw(),console.log("succ")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yd2Fkb21hY2kwMi8uL3NyYy9tZW1vcnlnYW1lbW9kZWwudHMiLCJ3ZWJwYWNrOi8vcndhZG9tYWNpMDIvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcndhZG9tYWNpMDIvLi9zcmMvcGxheWVybW9kZWwudHMiLCJ3ZWJwYWNrOi8vcndhZG9tYWNpMDIvLi9zcmMvbWVtb3J5Z2FtZXZpZXcudHMiXSwibmFtZXMiOlsiR2FtZVN0YXRlIiwicGxheWVyIiwibmFtZSIsInRoaXMiLCJzY29yZSIsInRvcFNjb3JlIiwibGl2ZXMiLCJwb2ludHMiLCJnYW1lIiwic2l6ZSIsImRpZmZpY3VsdHkiLCJzcGVlZCIsInRpbGVzIiwiQXJyYXkiLCJjdXJyZW50TGV2ZWwiLCJnYW1lU3RhdGUiLCJzdG9wcGVkIiwiY3VycmVudFRpbGUiLCJpbmQiLCJlbmQiLCJpbmNyZWFzZVNjb3JlIiwibmV4dFJvdW5kIiwicmFuZG9tVGlsZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsInB1c2giLCJyZXNldCIsInJ1bm5pbmciLCJnZW5lcmF0ZUFSYW5kb21UaWxlIiwiZXZhbHVhdGVUb3BTY29yZSIsImNvbnRhaW5lciIsIm1vZGVsIiwiaSIsInJvdyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiaiIsImJ1dHRvbiIsImlkIiwib25jbGljayIsImFzeW5jIiwiZXZhbHVhdGUiLCJpbm5lckhUTUwiLCJkaXNhYmxlZCIsImludGVyYWN0YWJsZVRpbGVzIiwiaW5pdGlhdGVHYW1lIiwicGxheWVySW5mbyIsInBsYXllck5hbWUiLCJwbGF5ZXJTY29yZSIsInRvU3RyaW5nIiwicGxheWVyVG9wU2NvcmUiLCJwbGF5ZXJMaXZlcyIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiaW5kZXhlcyIsInN0YXJ0IiwiY29uc29sZSIsImxvZyIsInNsZWVwIiwiZm9yRWFjaCIsImluZGV4Iiwic2hvd1RpbGUiLCJnZXRFbGVtZW50QnlJZCIsInRpbGUiLCJyZWplY3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwibGV2ZWxOb3RDbGVhcmVkIiwiZGlzcGxheVBhdHRlcm4iLCJsZXZlbENsZWFyZWQiLCJ1cGRhdGVQbGF5ZXJJbmZvIiwidmFsdWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9ucyIsImJvZHkiLCJkcmF3Il0sIm1hcHBpbmdzIjoibUJBQU8sSUFBSUEsR0FDWCxTQUFXQSxHQUNQQSxFQUFVQSxFQUFtQixRQUFJLEdBQUssVUFDdENBLEVBQVVBLEVBQW1CLFFBQUksR0FBSyxVQUYxQyxDQUdHQSxJQUFjQSxFQUFZLEtDRDdCLE1BQU1DLEVBQVMsSUNIUixNQUNILFlBQVlDLEdBQ1JDLEtBQUtELEtBQU9BLEVBQ1pDLEtBQUtDLE1BQVEsRUFDYkQsS0FBS0UsU0FBVyxFQUNoQkYsS0FBS0csTUFBUSxFQUlqQixtQkFDc0IsR0FBZEgsS0FBS0csT0FBY0gsS0FBS0MsT0FBU0QsS0FBS0UsV0FDdENGLEtBQUtFLFNBQVdGLEtBQUtDLE9BSzdCLGNBQWNHLEdBQ1ZKLEtBQUtDLE9BQVNHLEVBRWxCLFFBQ0lKLEtBQUtHLE1BQVEsRUFDYkgsS0FBS0MsTUFBUSxJRGxCVSxhQUN6QkksRUFBTyxJRENOLE1BQ0gsWUFBWUMsRUFBTUMsRUFBWUMsRUFBT1YsR0FDakNFLEtBQUtNLEtBQU9BLEVBQ1pOLEtBQUtTLE1BQVEsSUFBSUMsTUFDakJWLEtBQUtPLFdBQWFBLEVBQ2xCUCxLQUFLUSxNQUFRQSxFQUNiUixLQUFLRixPQUFTQSxFQUNkRSxLQUFLVyxhQUFlLEVBQ3BCWCxLQUFLWSxVQUFZZixFQUFVZ0IsUUFDM0JiLEtBQUtjLFlBQWMsRUFFdkIsU0FBU0MsR0FDTCxPQUFJZixLQUFLUyxNQUFNVCxLQUFLYyxlQUFpQkMsR0FDakNmLEtBQUtGLE9BQU9LLFFBQ1pILEtBQUtjLFlBQWMsRUFDTyxJQUF0QmQsS0FBS0YsT0FB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UzZDLGlCQUFpQixTQUMxQ0MsRUFBUWpCLFNBQVN4QixHQUFXQSxFQUFPOEIsVUFBVUMsSUFBSSxtQkFDM0NwRSxLQUFLNEQsTUFBTSxLQUNqQmtCLEVBQVFqQixTQUFTeEIsR0FBV0EsRUFBTzhCLFVBQVVFLE9BQU8sYUFFeEQsOEJBQ1VyRSxLQUFLNEQsTUFBTSxLQUNqQixNQUFNa0IsRUFBVTlDLFNBQVM2QyxpQkFBaUIsU0FDMUNDLEVBQVFqQixTQUFTeEIsR0FBV0EsRUFBTzhCLFVBQVVDLElBQUksc0JBQzNDcEUsS0FBSzRELE1BQU0sS0FDakJrQixFQUFRakIsU0FBU3hCLEdBQVdBLEVBQU84QixVQUFVRSxPQUFPLGtCRjVINUJyQyxTQUFTK0MsS0FBTTFFLEdBQzFDMkUsT0FDTHRCLFFBQVFDLElBQUksUyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBHYW1lU3RhdGU7XHJcbihmdW5jdGlvbiAoR2FtZVN0YXRlKSB7XHJcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wic3RvcHBlZFwiXSA9IDBdID0gXCJzdG9wcGVkXCI7XHJcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wicnVubmluZ1wiXSA9IDFdID0gXCJydW5uaW5nXCI7XHJcbn0pKEdhbWVTdGF0ZSB8fCAoR2FtZVN0YXRlID0ge30pKTtcclxuZXhwb3J0IGNsYXNzIE1lbW9yeUdhbWVNb2RlbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzaXplLCBkaWZmaWN1bHR5LCBzcGVlZCwgcGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLnRpbGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSAxO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gR2FtZVN0YXRlLnN0b3BwZWQ7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGlsZSA9IDA7XHJcbiAgICB9XHJcbiAgICBldmFsdWF0ZShpbmQpIHtcclxuICAgICAgICBpZiAodGhpcy50aWxlc1t0aGlzLmN1cnJlbnRUaWxlXSAhPT0gaW5kKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmxpdmVzLS07XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbGUgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIubGl2ZXMgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGlsZSsrO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5pbmNyZWFzZVNjb3JlKDUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50VGlsZSA9PT0gdGhpcy5jdXJyZW50TGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dFJvdW5kKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZW5lcmF0ZUFSYW5kb21UaWxlKCkge1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbVRpbGUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiB0aGlzLnNpemUgKiB0aGlzLnNpemUpICVcclxuICAgICAgICAgICAgKHRoaXMuc2l6ZSAqIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy50aWxlcy5wdXNoKHJhbmRvbVRpbGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVzO1xyXG4gICAgfVxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZVN0YXRlID09PSBHYW1lU3RhdGUuc3RvcHBlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gR2FtZVN0YXRlLnJ1bm5pbmc7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQVJhbmRvbVRpbGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnRpbGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIucmVzZXQoKTtcclxuICAgIH1cclxuICAgIG5leHRSb3VuZCgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRMZXZlbCsrO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRpbGUgPSAwO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVBUmFuZG9tVGlsZSgpO1xyXG4gICAgfVxyXG4gICAgZW5kKCkge1xyXG4gICAgICAgIHRoaXMucGxheWVyLmV2YWx1YXRlVG9wU2NvcmUoKTtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUGxheWVyTW9kZWwgfSBmcm9tIFwiLi9wbGF5ZXJtb2RlbFwiO1xyXG5pbXBvcnQgeyBNZW1vcnlHYW1lTW9kZWwgfSBmcm9tIFwiLi9tZW1vcnlnYW1lbW9kZWxcIjtcclxuaW1wb3J0IHsgTWVtb3J5R2FtZVZpZXcgfSBmcm9tIFwiLi9tZW1vcnlnYW1ldmlld1wiO1xyXG5jb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyTW9kZWwoXCJTdHJhaGluamFcIik7XHJcbmNvbnN0IGdhbWUgPSBuZXcgTWVtb3J5R2FtZU1vZGVsKDMsIDEwLCA1LCBwbGF5ZXIpO1xyXG5jb25zdCB2aWV3ID0gbmV3IE1lbW9yeUdhbWVWaWV3KGRvY3VtZW50LmJvZHksIGdhbWUpO1xyXG52aWV3LmRyYXcoKTtcclxuY29uc29sZS5sb2coXCJzdWNjXCIpO1xyXG4iLCJleHBvcnQgY2xhc3MgUGxheWVyTW9kZWwge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICAgICAgdGhpcy50b3BTY29yZSA9IDA7XHJcbiAgICAgICAgdGhpcy5saXZlcyA9IDM7XHJcbiAgICB9XHJcbiAgICAvL2Rpc3BsYXlTY29yZShzY29yZUVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7fVxyXG4gICAgLy9kaXNwbGF5VG9wU2NvcmUodG9wU2NvcmVFbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge31cclxuICAgIGV2YWx1YXRlVG9wU2NvcmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGl2ZXMgPT0gMCAmJiB0aGlzLnNjb3JlID49IHRoaXMudG9wU2NvcmUpXHJcbiAgICAgICAgICAgIHRoaXMudG9wU2NvcmUgPSB0aGlzLnNjb3JlO1xyXG4gICAgfVxyXG4gICAgLy8gcmVtb3ZlTGlmZSgpIHtcclxuICAgIC8vICAgdGhpcy5saXZlcy0tO1xyXG4gICAgLy8gfVxyXG4gICAgaW5jcmVhc2VTY29yZShwb2ludHMpIHtcclxuICAgICAgICB0aGlzLnNjb3JlICs9IHBvaW50cztcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMubGl2ZXMgPSAzO1xyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBNZW1vcnlHYW1lVmlldyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIG1vZGVsKSB7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZHJhdygpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubW9kZWwuc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcIlJvd1wiO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubW9kZWwuc2l6ZTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IFwiVGlsZVwiO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmlkID0gYEJ1dHRvbiR7aSAqIHRoaXMubW9kZWwuc2l6ZSArIGp9YDtcclxuICAgICAgICAgICAgICAgIC8vYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZhbHVhdGUoYnV0dG9uLCBpICogdGhpcy5tb2RlbC5zaXplICsgaik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gXCJTdGFydFwiO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBcIlN0YXJ0XCI7XHJcbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3RhYmxlVGlsZXMoXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRlR2FtZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwbGF5ZXJJbmZvLmNsYXNzTmFtZSA9IFwiUGxheWVySW5mb1wiO1xyXG4gICAgICAgIGNvbnN0IHBsYXllck5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgcGxheWVyTmFtZS5pbm5lckhUTUwgPSB0aGlzLm1vZGVsLnBsYXllci5uYW1lO1xyXG4gICAgICAgIHBsYXllck5hbWUuY2xhc3NOYW1lID0gXCJQbGF5ZXJOYW1lXCI7XHJcbiAgICAgICAgcGxheWVySW5mby5hcHBlbmRDaGlsZChwbGF5ZXJOYW1lKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJTY29yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBwbGF5ZXJTY29yZS5pbm5lckhUTUwgPSB0aGlzLm1vZGVsLnBsYXllci5zY29yZS50b1N0cmluZygpO1xyXG4gICAgICAgIHBsYXllclNjb3JlLmNsYXNzTmFtZSA9IFwiUGxheWVyU2NvcmVcIjtcclxuICAgICAgICBwbGF5ZXJJbmZvLmFwcGVuZENoaWxkKHBsYXllclNjb3JlKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJUb3BTY29yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBwbGF5ZXJUb3BTY29yZS5pbm5lckhUTUwgPSB0aGlzLm1vZGVsLnBsYXllci50b3BTY29yZS50b1N0cmluZygpO1xyXG4gICAgICAgIHBsYXllclRvcFNjb3JlLmNsYXNzTmFtZSA9IFwiUGxheWVyVG9wU2NvcmVcIjtcclxuICAgICAgICBwbGF5ZXJJbmZvLmFwcGVuZENoaWxkKHBsYXllclRvcFNjb3JlKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJMaXZlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBwbGF5ZXJMaXZlcy5pbm5lckhUTUwgPSB0aGlzLm1vZGVsLnBsYXllci5saXZlcy50b1N0cmluZygpO1xyXG4gICAgICAgIHBsYXllckxpdmVzLmNsYXNzTmFtZSA9IFwiUGxheWVyTGl2ZXNcIjtcclxuICAgICAgICBwbGF5ZXJJbmZvLmFwcGVuZENoaWxkKHBsYXllckxpdmVzKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChwbGF5ZXJJbmZvKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNsZWVwKG1zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0aWF0ZUdhbWUoKSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IHRoaXMubW9kZWwuc3RhcnQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhpbmRleGVzKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDEwMDApO1xyXG4gICAgICAgIGluZGV4ZXMuZm9yRWFjaChhc3luYyAoaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zaG93VGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgQnV0dG9uJHtpbmRleH1gKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzaG93VGlsZSh0aWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGlsZS5jbGFzc0xpc3QuYWRkKFwiQWN0aXZlVGlsZVwiKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJBY3RpdmVUaWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIGV2YWx1YXRlKGJ1dHRvbiwgaW5kZXgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNob3dUaWxlKGJ1dHRvbik7XHJcbiAgICAgICAgY29uc3Qgb3V0Y29tZSA9IHRoaXMubW9kZWwuZXZhbHVhdGUoaW5kZXgpO1xyXG4gICAgICAgIHN3aXRjaCAob3V0Y29tZSkge1xyXG4gICAgICAgICAgICBjYXNlIC0yOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuU3RhcnRcIik7XHJcbiAgICAgICAgICAgICAgICBzdGFydC5zZXRBdHRyaWJ1dGUoXCJlbmFibGVkXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJhY3RhYmxlVGlsZXMoXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIC0xOiB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxldmVsTm90Q2xlYXJlZCgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5UGF0dGVybigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAwOiB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDE6IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubGV2ZWxDbGVhcmVkKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRpc3BsYXlQYXR0ZXJuKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVBsYXllckluZm8oKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGRpc3BsYXlQYXR0ZXJuKCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSB0aGlzLm1vZGVsLnRpbGVzO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGluZGV4ZXMpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMjAwMCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBpbmRleCBvZiBpbmRleGVzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2hvd1RpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEJ1dHRvbiR7aW5kZXh9YCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGludGVyYWN0YWJsZVRpbGVzKHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuVGlsZVwiKTtcclxuICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4gYnV0dG9uLnNldEF0dHJpYnV0ZShcImVuYWJsZWRcIiwgdmFsdWUpKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBsYXllckluZm8oKSB7XHJcbiAgICAgICAgLypjb25zdCBwbGF5ZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLlBsYXllck5hbWUnKTtcclxuICAgICAgICBwbGF5ZXJOYW1lLmlubmVySFRNTCA9IHRoaXMubW9kZWwucGxheWVyLm5hbWU7Ki9cclxuICAgICAgICBjb25zdCBwbGF5ZXJTY29yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUGxheWVyU2NvcmVcIik7XHJcbiAgICAgICAgcGxheWVyU2NvcmUuaW5uZXJIVE1MID0gdGhpcy5tb2RlbC5wbGF5ZXIuc2NvcmUudG9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJUb3BTY29yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUGxheWVyVG9wU2NvcmVcIik7XHJcbiAgICAgICAgcGxheWVyVG9wU2NvcmUuaW5uZXJIVE1MID0gdGhpcy5tb2RlbC5wbGF5ZXIudG9wU2NvcmUudG9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJMaXZlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUGxheWVyTGl2ZXNcIik7XHJcbiAgICAgICAgcGxheWVyTGl2ZXMuaW5uZXJIVE1MID0gdGhpcy5tb2RlbC5wbGF5ZXIubGl2ZXMudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxldmVsQ2xlYXJlZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDUwMCk7XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuVGlsZVwiKTtcclxuICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4gYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJDbGVhcmVkXCIpKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDEwMDApO1xyXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIkNsZWFyZWRcIikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGV2ZWxOb3RDbGVhcmVkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoNTAwKTtcclxuICAgICAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5UaWxlXCIpO1xyXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiBidXR0b24uY2xhc3NMaXN0LmFkZChcIk5vdENsZWFyZWRcIikpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMTAwMCk7XHJcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiTm90Q2xlYXJlZFwiKSk7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==